(function(a){a.drillDownMenu=function(d,j){var b=this;b.$el=a(d);b.el=d;var g=a("> ul:first",b.$el),h=a("> h1:first",b.$el),i=a("#searchform",b.$el);b.$el.data("drillDownMenu",b);b.init=function(){b.options=a.extend({},a.drillDownMenu.defaultOptions,j);a(".title",b.$el).html(b.options.title);h.hide();b._initUl(g);a("ul",g).hide();a("ul > li",b.$el).removeClass("current");for(var f=a('ul > li > a[href="'+location.hash+'"]',b.$el).parent().addClass("current").parentsUntil(b.$el,"li"),c,f=a.makeArray(f);c=
f.pop();)a(">a",c).click();a(".back",b.$el).bind("click.drillDownMenu",a.proxy(function(a){var c=b.$el.data("currentMenu");c.length&&c.trigger("goback");a.preventDefault()},b.$el))};b._initUl=function(f){a("> li:not(:has(ul))",f).click(function(){a(" > ul li",b.$el).removeClass("current");a(this).addClass("current")});a("> li:has(ul)",f).each(function(){var c=a(this),f=a("> a:first",c),d=a("> ul:first",c);d.css({top:-c.position().top-1});b._initUl(d);d.bind("goback.drillDownMenu",function(c){var d=
a(this),e=a(this).parent().closest("ul");e.length&&(g.stop(false,true).animate({left:"+=100%"},300,"easeInOutQuart",function(){d.hide()}),b.$el.data("currentMenu",e),e.hasClass("tlm")&&(h.hide(),i.show()));a(".title",b.$el).stop().fadeTo(150,0,function(){a(".title",b.$el).html(e.length&&e[0]!=g[0]?a("> a > span",e.parent()).html():b.options.title)}).fadeTo(150,1);c.preventDefault();return false});f.bind("click.drillDownMenu",a.proxy(function(c){a(this).parent().closest("ul");var d=this,e=a("> ul:first",
this);e.show();g.stop(false,true).animate({left:"-=100%"},300,"easeInOutQuart");b.$el.data("currentMenu",e);h.is(":hidden")&&(h.show(),i.hide());a(".title",b.$el).stop().fadeTo(150,0,function(){a(".title",b.$el).html(a("> a > span",d).html())}).fadeTo(150,1);c.preventDefault()},c))});return b};b.init()};a.drillDownMenu.defaultOptions={title:"Main Menu",target:"#main-content",pageDownloaded:function(){}};a.fn.drillDownMenu=function(d){return this.each(function(){new a.drillDownMenu(this,d)})};a.fn.getdrillDownMenu=
function(){this.data("drillDownMenu")}})(jQuery);
